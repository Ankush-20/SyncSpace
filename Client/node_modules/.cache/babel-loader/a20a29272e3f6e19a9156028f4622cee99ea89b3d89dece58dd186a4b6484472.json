{"ast":null,"code":"var _jsxFileName = \"/Users/ankushrandhawa/Downloads/full-stack-crm-main/Client/src/views/admin/contact/components/propertyModel.js\",\n  _s = $RefreshSig$();\nimport { AddIcon } from '@chakra-ui/icons';\nimport { Button, Flex, Modal, ModalBody, ModalCloseButton, ModalContent, ModalFooter, ModalHeader, ModalOverlay } from '@chakra-ui/react';\nimport Spinner from 'components/spinner/Spinner';\nimport { useEffect, useState } from 'react';\nimport { getApi, postApi } from 'services/api';\nimport CheckTable from './propertyTable';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PropertyModel = props => {\n  _s();\n  const {\n    onClose,\n    isOpen,\n    fetchData,\n    id,\n    interestProperty\n  } = props;\n  const [selectedValues, setSelectedValues] = useState([]);\n  const [isLoding, setIsLoding] = useState(false);\n  const columns = [{\n    Header: \"#\",\n    accessor: \"_id\",\n    isSortable: false,\n    width: 10\n  }, {\n    Header: 'property Type',\n    accessor: 'propertyType'\n  }, {\n    Header: \"property Address\",\n    accessor: \"propertyAddress\"\n  }, {\n    Header: \"listing Price\",\n    accessor: \"listingPrice\"\n  }, {\n    Header: \"square Footage\",\n    accessor: \"squareFootage\"\n  }, {\n    Header: \"year Built\",\n    accessor: \"yearBuilt\"\n  }];\n  const [data, setData] = useState([]);\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  const fetchPropertyData = async () => {\n    setIsLoding(true);\n    let result = await getApi(user.role === 'admin' ? 'api/property/' : `api/property/?createBy=${user._id}`);\n    if (result && result.status == 200) {\n      setData(result === null || result === void 0 ? void 0 : result.data);\n    }\n    setIsLoding(false);\n  };\n  const uniqueValues = [...new Set(selectedValues)];\n  const handleSubmit = async () => {\n    try {\n      setIsLoding(true);\n      let result = await postApi(`api/contact/add-property-interest/${id}`, uniqueValues);\n      if (result && result.status == 200) {\n        fetchData();\n        onClose();\n      }\n    } catch (e) {\n      console.log(e);\n    } finally {\n      setIsLoding(false);\n    }\n  };\n  useEffect(() => {\n    interestProperty === null || interestProperty === void 0 ? void 0 : interestProperty.map(item => setSelectedValues(prevSelectedValues => [...prevSelectedValues, item]));\n    fetchPropertyData();\n  }, [interestProperty]);\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    onClose: onClose,\n    size: \"full\",\n    isOpen: isOpen,\n    children: [/*#__PURE__*/_jsxDEV(ModalOverlay, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ModalContent, {\n      children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n        children: \"Select Intrasted Property\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ModalCloseButton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n        children: isLoding ? /*#__PURE__*/_jsxDEV(Flex, {\n          justifyContent: 'center',\n          alignItems: 'center',\n          width: \"100%\",\n          children: /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(CheckTable, {\n          tableData: data,\n          selectedValues: selectedValues,\n          setSelectedValues: setSelectedValues,\n          columnsData: columns,\n          title: \"Properties\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 35\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"brand\",\n          onClick: handleSubmit,\n          disabled: isLoding ? true : false,\n          leftIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 113\n          }, this),\n          children: [\" \", isLoding ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 139\n          }, this) : 'Add']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => onClose(),\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n_s(PropertyModel, \"aa3wlLvzVIm41LrUXcZ+alAyZtk=\");\n_c = PropertyModel;\nexport default PropertyModel;\nvar _c;\n$RefreshReg$(_c, \"PropertyModel\");","map":{"version":3,"names":["AddIcon","Button","Flex","Modal","ModalBody","ModalCloseButton","ModalContent","ModalFooter","ModalHeader","ModalOverlay","Spinner","useEffect","useState","getApi","postApi","CheckTable","jsxDEV","_jsxDEV","PropertyModel","props","_s","onClose","isOpen","fetchData","id","interestProperty","selectedValues","setSelectedValues","isLoding","setIsLoding","columns","Header","accessor","isSortable","width","data","setData","user","JSON","parse","localStorage","getItem","fetchPropertyData","result","role","_id","status","uniqueValues","Set","handleSubmit","e","console","log","map","item","prevSelectedValues","size","children","fileName","_jsxFileName","lineNumber","columnNumber","justifyContent","alignItems","tableData","columnsData","title","variant","onClick","disabled","leftIcon","_c","$RefreshReg$"],"sources":["/Users/ankushrandhawa/Downloads/full-stack-crm-main/Client/src/views/admin/contact/components/propertyModel.js"],"sourcesContent":["import { AddIcon } from '@chakra-ui/icons'\nimport { Button, Flex, Modal, ModalBody, ModalCloseButton, ModalContent, ModalFooter, ModalHeader, ModalOverlay } from '@chakra-ui/react'\nimport Spinner from 'components/spinner/Spinner'\nimport { useEffect, useState } from 'react'\nimport { getApi, postApi } from 'services/api'\nimport CheckTable from './propertyTable'\n\nconst PropertyModel = (props) => {\n    const { onClose, isOpen, fetchData, id, interestProperty } = props\n    const [selectedValues, setSelectedValues] = useState([]);\n    const [isLoding, setIsLoding] = useState(false)\n\n\n    const columns = [\n        { Header: \"#\", accessor: \"_id\", isSortable: false, width: 10 },\n        { Header: 'property Type', accessor: 'propertyType' },\n        { Header: \"property Address\", accessor: \"propertyAddress\", },\n        { Header: \"listing Price\", accessor: \"listingPrice\", },\n        { Header: \"square Footage\", accessor: \"squareFootage\", },\n        { Header: \"year Built\", accessor: \"yearBuilt\", },\n    ];\n    const [data, setData] = useState([])\n    const user = JSON.parse(localStorage.getItem(\"user\"))\n    const fetchPropertyData = async () => {\n        setIsLoding(true)\n        let result = await getApi(user.role === 'admin' ? 'api/property/' : `api/property/?createBy=${user._id}`);\n        if (result && result.status == 200) {\n            setData(result?.data);\n        }\n        setIsLoding(false)\n    }\n    const uniqueValues = [...new Set(selectedValues)];\n\n    const handleSubmit = async () => {\n        try {\n            setIsLoding(true)\n            let result = await postApi(`api/contact/add-property-interest/${id}`, uniqueValues);\n            if (result && result.status == 200) {\n                fetchData()\n                onClose()\n            }\n        }\n        catch (e) {\n            console.log(e)\n        }\n        finally {\n            setIsLoding(false)\n        }\n    }\n\n\n    useEffect(() => {\n        interestProperty?.map((item) => setSelectedValues((prevSelectedValues) => [...prevSelectedValues, item]))\n        fetchPropertyData()\n    }, [interestProperty])\n\n    return (\n        <Modal onClose={onClose} size='full' isOpen={isOpen} >\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>Select Intrasted Property</ModalHeader>\n                <ModalCloseButton />\n                <ModalBody>\n                    {isLoding ?\n                        <Flex justifyContent={'center'} alignItems={'center'} width=\"100%\" >\n                            <Spinner />\n                        </Flex> : <CheckTable tableData={data} selectedValues={selectedValues} setSelectedValues={setSelectedValues} columnsData={columns} title=\"Properties\" />}\n                </ModalBody>\n                <ModalFooter>\n                    <Button variant='brand' onClick={handleSubmit} disabled={isLoding ? true : false} leftIcon={<AddIcon />}> {isLoding ? <Spinner /> : 'Add'}</Button>\n                    <Button onClick={() => onClose()}>Close</Button>\n                </ModalFooter>\n            </ModalContent>\n        </Modal>\n\n    )\n}\n\nexport default PropertyModel\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}